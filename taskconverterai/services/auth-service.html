<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auth Service - TaskConverterAI</title>
    <meta name="description" content="OpenAPI documentation for Auth Service">
    <link rel="stylesheet" href="https://unpkg.com/swagger-ui-dist@5.9.0/swagger-ui.css">
    <style>
        body { margin: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: linear-gradient(135deg, #f6d365 0%, #fda085 100%); min-height: 100vh; }
        .service-header { background: rgba(255,255,255,0.95); padding: 1rem 2rem; box-shadow: 0 2px 20px rgba(0,0,0,0.05); }
        .back-link { color: #d35400; text-decoration: none; font-weight: 500; padding: 0.5rem 1rem; border-radius: 6px; display: inline-block; }
        .service-title { color: #2c3e50; font-size: 1.6rem; margin: 0; }
        .service-content { background: white; }
        #swagger-ui { max-width: none; }
        .swagger-ui .topbar { display: none; }
        .loading-swagger { text-align: center; padding: 3rem; color: #666; }
        .loading-spinner { width: 40px; height: 40px; border: 4px solid #f3f3f3; border-top: 4px solid #d35400; border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 1rem; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .error-swagger { background: #f8d7da; color: #721c24; padding: 2rem; margin: 2rem; border-radius: 8px; text-align: center; }
    </style>
</head>
<body>
    <header class="service-header">
        <nav class="service-nav">
            <a href="../index.html" class="back-link">‚Üê Back to Services</a>
        </nav>
        <h1 class="service-title">Auth Service Documentation</h1>
    </header>

    <main class="service-content">
        <div class="loading-swagger" id="loading-swagger">
            <div class="loading-spinner"></div>
            <p>Loading API documentation...</p>
        </div>
        <div id="swagger-ui"></div>
        <div class="error-swagger" id="error-swagger" style="display: none;">
            <h3>Error Loading Documentation</h3>
            <p>Unable to load the OpenAPI specification. Please check if the file exists and is properly formatted.</p>
            <button onclick="location.reload()" style="margin-top: 1rem; padding: 0.5rem 1rem; background: #dc3545; color: white; border: none; border-radius: 4px; cursor: pointer;">Retry</button>
        </div>
    </main>

    <script src="https://unpkg.com/swagger-ui-dist@5.9.0/swagger-ui-bundle.js"></script>
    <script src="https://unpkg.com/swagger-ui-dist@5.9.0/swagger-ui-standalone-preset.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const loadingElement = document.getElementById('loading-swagger');
            const errorElement = document.getElementById('error-swagger');
            try {
                const ui = SwaggerUIBundle({
                    url: 'openapi/auth-service-openapi.yml',
                    dom_id: '#swagger-ui',
                    deepLinking: true,
                    presets: [ SwaggerUIBundle.presets.apis, SwaggerUIStandalonePreset ],
                    plugins: [ SwaggerUIBundle.plugins.DownloadUrl ],
                    layout: 'StandaloneLayout',
                    onComplete: function() { if (loadingElement) { loadingElement.style.display = 'none'; } console.log('Auth Swagger UI loaded'); },
                    onFailure: function(error) { console.error('Auth Swagger UI failed to load:', error); if (loadingElement) { loadingElement.style.display = 'none'; } if (errorElement) { errorElement.style.display = 'block'; } }
                });

                setTimeout(function() {
                    if (loadingElement && loadingElement.style.display !== 'none') {
                        loadingElement.style.display = 'none';
                        if (errorElement) { errorElement.style.display = 'block'; }
                    }
                }, 10000);

            } catch (error) {
                console.error('Error initializing Auth Swagger UI:', error);
                if (loadingElement) { loadingElement.style.display = 'none'; }
                if (errorElement) { errorElement.style.display = 'block'; }
            }
        });
    </script>
</body>
</html>
